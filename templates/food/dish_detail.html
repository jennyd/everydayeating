{% extends "food/base.html" %}

{% block content %}

    <h1>{{ dish.name }}</h1>
    <p>
    {% if dish.total_quantity_unit == "items" %}
        {{ dish.total_quantity }} {{ dish.name }} cooked on {{ dish.date_cooked }}.
    {% else %}
        {{ dish.total_quantity }}{{ dish.total_quantity_unit }} of {{ dish.name }} cooked on {{ dish.date_cooked }}.
    {% endif %}
    ({{ dish.get_dish_calories }} calories)
    <a href="{% url dish_edit dish.id %}">Edit</a><p/>
    
    {% if dish.contained_comestibles_set.all %}
        Ingredients:
        <ul>
        {% for amount in dish.contained_comestibles_set.all %}
            {{ amount.quantity }}{% firstof amount.contained_comestible.ingredient.reference_quantity_unit amount.contained_comestible.dish.total_quantity_unit %} of {{ amount.contained_comestible }} ({{ amount.get_amount_calories }} calories) {# add condition for dish units #}
            <br />
        {% endfor %}
        </ul>
            
        <a href="{% url dish_edit_amounts dish.id %}">Edit all of this dish's ingredients</a><p/>

    {% else %}
        <p>This dish doesn't have any ingredients.</p>
        <a href="{% url dish_edit_amounts dish.id %}">Add ingredients to this dish</a><p/>
    {% endif %}

{% endblock content %}
